\chapter{Racks}

\begin{definition}
\label{defn:rack}
\index{Rack}
A \emph{rack} is a pair $(X,\triangleright)$, 
where $X$ is a non-empty set and 
$X\times X\to X$, $(x,y)\mapsto x\triangleright y$, is a binary operation on $X$ such that
the maps $\rho_y\colon X\to X$, $x\mapsto x\triangleleft y$, are bijective for all $y\in X$, and 
\begin{equation}
\label{eq:rack}
(x\triangleleft y)\triangleleft z=(x\triangleleft z)\triangleleft (y\triangleleft z)
\end{equation}
for all $x,y,z\in X$.
\end{definition}

Racks are used in low-dimensional topology~\cite{MR3379534}, singularities~\cite{MR975077} 
and in the classification of finite-dimensional pointed Hopf algebras~\cite{MR1994219}.

\begin{example}
\index{Rack!trivial}
    Let $X$ be a set. Then $x\triangleleft y=x$ turns $X$ into a rack. 
    This is the \emph{trivial rack} on $X$. 
\end{example}

\begin{example}
    \index{Rack!dihedral}
    Let $X=\Z/n$. Then $x\triangleleft y=2y-x$ turns $X$ into a rack. This is 
    the \emph{dihedral rack} of size $n$. 
\end{example}

\begin{example}
    \index{Rack!Alexander}
    Let $A$ be an abelian group and $f\in\Aut(A)$. Then 
    \[
    x\triangleleft y=(\id-f)(y)+f(x)
    \]
    turns $A$ into a rack. These racks 
    are known as the \emph{Alexander racks}.
\end{example}

\begin{definition}
    \index{Rack!homomorphism}
    \index{Rack!isomorphism}
    \index{Homomorphism!of racks}
    Let $X$ and $Z$ be racks. 
    A \emph{rack homomorphism} between the racks $X$ and $Z$ is a map $f\colon X\to Z$ such that 
    $f(x\triangleleft y)=f(x)\triangleleft f(y)$ for all $x,y\in X$. 
    An \emph{isomorphism} of racks is a bijective rack homomorphism. 
\end{definition}

For $n\in\N$, let $r(n)$ be the number of isomorphism classes of racks of size
$n$. Some values of $r(n)$ appear in Table~\ref{tab:racks}, see for example~\cite{MR3957904}.  

\begin{table}[H]
\centering
\caption{Enumeration of non-isomorphic racks.}
\begin{tabular}{|c|cccccccccccc|}
\hline
$n$ & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10 & 11 & 12 & 13\tabularnewline
\hline
$r(n)$ & 2 & 6 & 19 &74&353 & 2080 & 16023 & 159526 & 2093244 & 36265070 & 836395102 & 25794670618\tabularnewline
\hline
\end{tabular}
\label{tab:racks}
\end{table}

\begin{proposition}
\label{pro:Venkov}
Let $X$ be a non-empty set and $X\times X\to X$, $(x,y)\mapsto x\triangleleft y$ be a binary operation on $X$. Then
$r(x,y)=(y,x\triangleleft y)$ is a solution if and only if $(X,\triangleleft)$ is a rack. 
\end{proposition}

\begin{proof}
The map $r$ satisfies $(r\times\id)(\id\times r)(r\times\id)=(\id\times r)(r\times\id)(\id\times r)$ if and only
if~\eqref{eq:rack} holds for all $x,y,z\in X$. The solution $(X,r)$ is non-degenerate if 
the maps $X\to X$, $x\mapsto x\triangleleft y$, are bijective. 
\end{proof}

The connection between racks and solutions goes deeper than 
the phenomenon appearing in Proposition~\ref{pro:Venkov}. 


\begin{proposition}
    \label{pro:derived}
    Let $(X,r)$ be a solution. Then 
    \begin{equation}
    \label{eq:derived}
    x\triangleleft y=\sigma_y\tau_{\sigma_x^{-1}(y)}(x)=\sigma_y\widehat{\sigma}^{-1}_y(x)
    \end{equation}
    turns $X$ into a rack and each $\sigma_x$ is a rack homomorphism. 
    Moreover, $(X,r)$ is involutive if and only if the rack $(X,\triangleleft)$ is trivial. 
\end{proposition}

\begin{proof}
    Since $r(x,\sigma_x^{-1}(y))=(y,\tau_{\sigma_x^{-1}(y)}(x))$, 
    it follows that 
    $\widehat{\sigma}_y^{-1}(x)=\tau_{\sigma_x^{-1}(y)}(x)$ 
    for all $x,y\in X$. Hence the second equality of~\eqref{eq:derived} holds. 
    
    To prove that each $\tau_z$ is a rack homomorphism it is enough to show that
    \[
    \sigma_x(y)\triangleleft \sigma_x\sigma_y(z)=\sigma_x(y\triangleleft\sigma_y(z))
    \]
    for all $x,y\in X$. Write $r(x,y)=(u,v)$. On the one hand, by 
    Lemma~\ref{lem:YB}, 
    \begin{align*}
        \sigma_x(y)\triangleleft \sigma_x\sigma_y(z)
        &=u\triangleleft \sigma_u\sigma_v(z)
        =\sigma_{\sigma_u\sigma_v(z)}\tau_{\sigma_{\tau_y(x)}(z)}\sigma_x(y)
        =\sigma_{\sigma_x\sigma_y(z)}\sigma_{\tau_{\sigma_y(z)}(x)}\tau_z(y).
    \end{align*}
    On the other hand, 
    \begin{align*}
        \sigma_x(y\triangleleft\sigma_y(z)) 
        &=\sigma_x\sigma_{\sigma_y(z)\tau_z(y)}
        =\sigma_{\sigma_x\sigma_y(z)}\sigma_{\tau_{\sigma_y(z)}(x)}\tau_z(y).
    \end{align*}
    
    By Proposition~\ref{pro:Venkov}, in order to prove that $(X,\triangleright)$ is a rack it is enough to show that
    $r(x,y)=(y,x\triangleleft y)$ satisfies the YBE. For that purpose, we demonstrate that 
    the map $J\colon X^3\to X^3$, $J(x,y,z)=(x,\sigma_x(y),\sigma_x\sigma_y(z))$ 
    is invertible and 
    satisfies 
    \[
    (\id\times s)\circ J=J\circ(\id\times r),
    \quad
    (s\times\id)\circ J=J\circ(r\times\id).
    \]
    The map $(x,y,z)\mapsto (x,\sigma_x^{-1}(y),\sigma_{\sigma_x^{-1}(y)}^{-1}\sigma_x^{-1}(z))$ is the inverse of $J$. 

    Since $\sigma_x$ is a rack homomorphism, 
    \begin{align*}
    \sigma_x(y)\triangleleft \sigma_x\sigma_y(z)
    &=\sigma_x(y\triangleleft \sigma_y(z))
    =\sigma_x\sigma_{\sigma_y(z)}\tau_{\sigma_y^{-1}\sigma_y(z)}(y)
    =\sigma_x\sigma_{\sigma_y(z)}\tau_z(y)
    \end{align*}
    Then it follows that 
    \begin{align*}
        (\id\times s)J(x,y,z)
        &=(\id\times s)(x,\sigma_x(y),\sigma_x\sigma_y(z))\\
        &=(x,\sigma_x\sigma_y(z),\sigma_x(y)\triangleleft \sigma_x\sigma_y(z))\\
        &=(x,\sigma_x\sigma_y(z),\sigma_x\sigma_{\sigma_y(z)}\tau_z(y))\\
        &=J(x,\sigma_y(z),\tau_z(y))\\
        &=J(\id\times r)(x,y,z).
    \end{align*}
    Similarly one proves that $(s\times\id)\circ J=J\circ (r\times\id)$.  
    This implies that $(X,s)$ is a solution and 
    hence $(X,\triangleleft)$ is a rack by Proposition~\ref{pro:Venkov}. 

    If $(X,r)$ is involutive, 
    then $x\triangleleft\sigma_x(y)=\sigma_{\sigma_x(y)}\tau_y(x)=x$ by~\eqref{eq:involutive}. 
    Conversely, if $x\triangleleft y=x$ for all $x,y\in X$,
    then $r$ is involutive, as 
    \[
    r^2(x,\sigma_x^{-1}(y))=r(y,\sigma_y^{-1}(x))=(x,\sigma_x^{-1}(y)).\qedhere
    \]
\end{proof}

%\begin{definition}
\index{Solution!derived rack}
The rack constructed in Proposition~\ref{pro:derived} is 
known as the \emph{derived solution} of $(X,r)$. 
%\end{definition}
There is a dual version of the derived rack:

\begin{proposition}
    \label{pro:derived_dual}
    Let $(X,r)$ be a solution. Then 
    \[
    x\blacktriangleleft y=\tau_y\sigma_{\tau_x^{-1}(y)}(x)=\tau_y\widehat{\tau}^{-1}_y(x)
    \]
    turns $X$ into a rack and each $\tau_x$ is a rack homomorphism. 
\end{proposition}

\begin{proof}
    Since $(X,r)$ is a solution, then so is $(X,r_0)$, where 
    $r_0(x,y)=(\tau_x(y),\sigma_y(x))$. Then the claim follows 
    from Proposition~\ref{pro:derived_dual} applied to 
    the solution $(X,r_0)$.
\end{proof}

In general, the racks constructed in Propositions~\ref{pro:derived} 
and~\ref{pro:derived_dual} are different:

\begin{example}
Let $X=\{1,\dots,5\}$ and $(X,r)$ be the solution given by
\begin{align*}
&\sigma_1=\id, && \sigma_2=\id, && \sigma_3=\id, && \sigma_4=(13)(45), &&\sigma_5=(12)(45),\\
&\tau_1=\id, && \tau_2=\id, && \tau_3=\id, && \tau_4=(23)(45), &&\tau_5=(23)(45).
\end{align*}
On the one hand the derived rack of $(X,r)$ is given by the permutations 
\begin{align*}
&\sigma_1\widehat{\sigma}_1^{-1}=\sigma_2\widehat{\sigma}_2^{-1}=\sigma_3\widehat{\sigma}_3^{-1}=\id,
&&\sigma_4\widehat{\sigma}_4^{-1}=(132),
&&\sigma_5\widehat{\sigma}_5^{-1}=(123).
\end{align*}
On the other hand, the dual derived rack by 
\begin{align*}
&\tau_1\widehat{\tau}_1^{-1}=\tau_2\widehat{\tau}_2^{-1}=\tau_3\widehat{\tau}_3^{-1}=\id,
&&\tau_4\widehat{\tau}_4^{-1}=(123),
&&\tau_5\widehat{\tau}_5^{-1}=(132).
\end{align*}
% [ [ (), (), (), (1,3)(4,5), (1,2)(4,5) ], [ (), (), (), (2,3)(4,5), (2,3)(4,5) ] ]
%[ [ (), (), (), (2,3)(4,5), (2,3)(4,5) ], [ (), (), (), (1,3)(4,5), (1,2)(4,5) ] ]
% [ (), (), (), (1,3,2), (1,2,3) ]
% [ (), (), (), (1,2,3), (1,3,2) ]
\end{example}

We now prove that the racks 
of Propositions~\ref{pro:derived} 
and~\ref{pro:derived_dual} are isomorphic. 
We shall need a lemma. 



\begin{lemma}
\label{lem:T_invertible}
Let $(X,r)$ be a solution. 
The map $T\colon X\to X$, $x\mapsto\sigma_x^{-1}(x)$, is invertible with
inverse $U\colon X\to X$, $x\mapsto\tau^{-1}_x(x\blacktriangleleft x)$. 
\end{lemma}

\begin{proof}
Let $x\in X$ and $y=U(x)=\tau^{-1}_x(x\blacktriangleleft x)$. 
Then $\tau_x(y)=x\blacktriangleleft x=\tau_x\widehat{\tau}^{-1}_x(x)$ and hence
$y=\widehat{\tau}^{-1}_x(x)$. Then $\widehat{\tau}_x(y)=x$ and 
\[
r^{-1}(y,x)=(\widehat{\sigma}_y(x),x)=(z,x),
\]
where $z\in X$ is such that $\sigma_z(x)=y$. By Lemma~\ref{lem:YB}, $\sigma_y=\sigma_z$. Then 
it follows that $x=\sigma^{-1}_y(y)=T(y)$. Therefore $y=U(x)=U(T(y))$.

To prove that $T(U(x))=x$, first note that 
\[
r(\tau^{-1}_x(x),x)=(\sigma_{\tau^{-1}_x(x)}(x),x)
\]
and Lemma~\ref{lem:YB} imply that $\sigma_{\tau^{-1}_x(x)}=\sigma_{\sigma_{\tau^{-1}_x(x)}(x)}$. Now
\begin{align*}
T(U(x))&=T(\tau^{-1}_x(x\blacktriangleleft x))=T(\sigma_{\tau^{-1}_x(x)}(x))\\
&=\sigma^{-1}_{\sigma_{\tau^{-1}_x(x)}(x)}\sigma_{\tau^{-1}_x(x)}(x)
=\sigma^{-1}_{\tau^{-1}_x(x)}\sigma_{\tau^{-1}_x(x)}(x)=x.\qedhere
\end{align*}
\end{proof}

There is version of Proposition~\ref{pro:T} for arbitrary solutions. 
A similar result appears in Exercise~\ref{prob:variationT}.



\begin{proposition}
    Let $(X,r)$ be a solution. Then $T\colon X\to X$, $x\mapsto\tau_x^{-1}(x)$, is a bijective
    map such that 
    \[
      T\circ\tau_y=\widehat{\sigma}^{-1}_y\circ T,
      \quad
      T\circ \widehat{\tau_y}=\sigma^{-1}_{y}\circ T
    \]
    and $T(x\blacktriangleleft y)=T(x)\triangleleft T(y)$ for all $x,y\in X$. 
\end{proposition}

\begin{proof}
    Lemma~\ref{lem:T_invertible} proves that $T$ is bijective. 
    We now compute 
    \begin{align*}
        T\tau_y(x) &= 
        \sigma^{-1}_{\tau_y(x)}\tau_y(x)
        =\sigma^{-1}_{\tau_y(x)}\sigma^{-1}_{\sigma_x(y)}\sigma_{\sigma_x(y)}\tau_y(x)\\
        &=\sigma^{-1}_y\sigma^{-1}_x\sigma_{\sigma_x(y)}\tau_y(x)
        =\sigma^{-1}_y\sigma_x^{-1}(x\triangleleft\sigma_x(y))
        =\sigma^{-1}_y(T(y)\triangleleft y)
        =\widehat{\sigma}^{-1}_yT(x).
    \end{align*}

    Since $\widehat{\tau}_y(x)=\sigma^{-1}_{\widehat{\sigma}_x(y)}(x)$, Lemma~\ref{lem:YB} implies that 
    \begin{align*}
        T\widehat{\tau_y}(x) 
        &=\sigma^{-1}_{\widehat{\tau}_y(x)}\widehat{\tau}_y(x)
        =\sigma^{-1}_{\widehat{\tau}_y(x)}\sigma^{-1}_{\widehat{\sigma}_x(y)}
        =\sigma^{-1}_{y}\sigma^{-1}_{x}(x)
        =\sigma^{-1}_{y}T(x).
    \end{align*}
    These formulas imply that
    \begin{equation}
        \label{eq:T_rack}
        T\circ\tau_y\circ\widehat{\tau}_y^{-1}
        =\widehat{\sigma}^{-1}_y\circ T\circ \widehat{\tau}^{-1}_y
        =\widehat{\sigma}^{-1}_y\circ \sigma_y\circ T.
    \end{equation}

    We evaluate Equality~\eqref{eq:T_rack} on $X$. On the one hand, 
    $T(x\blacktriangleleft y)=T\sigma_x\widehat{\sigma_x}^{-1}(y)$.
    On the other hand,
    \begin{align*}
        \widehat{\sigma}_y^{-1}\sigma_yT(x)
        &=\sigma_y^{-1}\sigma_y\widehat{\sigma}_y^{-1}\sigma_yT(x)
        =\sigma_y^{-1}(\sigma_yT(x)\triangleleft y)=T(x)\triangleleft T(y).\qedhere
    \end{align*}
\end{proof}


%If $(X,r)$ is a solution, the map $r\colon X\times X\to X\times X$ is invertible. Write 
% \[
% r^{-1}(x,y)=(\widehat{\sigma}_x(y),\widehat{\tau}_y(x)).
% \]
% Since $(X,r^{-1})$ is a solution, Lemma~\ref{lem:YB} implies that 
% the following formulas hold:
% \[
% \widehat{\tau}_y\widehat{\tau_x}=\widehat{\tau}_{\tau_y(x)}\widehat{\tau}_{\sigma_x(y)},
% \quad
% \widehat{\sigma}_x\widehat{\sigma_y}=\widehat{\sigma}_{\sigma_x(y)}\widehat{\sigma}_{\tau_y(x)}.
% \]
% Since $r(\tau^{-1}_y(x),y)=(\sigma_{\tau^{-1}_y(x)}(y),x)$, 
% it follows that 
% \[
% \widehat{\tau}_x\sigma_{\tau^{-1}_y(x)}(y)=y.
% \]
% for all $x,y\in X$. Moreover, 
% \[
% x\triangleright y=\tau_x\sigma_{\tau^{-1}_y(x)}(y)=\tau_x\widehat{\tau}^{-1}_x(y)
% \]
% for all $x,y\in X$. 

%We first need a lemma. 

% \begin{proposition}
%     Let $(X,r)$ be a solution and let $(X,\triangleright)$ be its derived rack. 
%     Then 
%     \[
%     T\circ \sigma_x=\tau_x^{-1}\circ\rho_x\circ T
%     \]
%     for all $x\in X$, where $T\colon X\to X$, $T(y)=\tau_y^{-1}(y)$, and 
%     $\rho_x\colon X\to X$, $\rho_x(y)=x\triangleright y$.
% \end{proposition}

% \begin{proof}
% By using Lemma~\ref{lem:YB} we compute 
% \begin{align*}
%     T\sigma_x(y) &= \tau^{-1}_{\sigma_x(y)}\sigma_x(y)
%     =\tau^{-1}_{\sigma_x(y)}(\tau^{-1}_{\tau_y(x)}(\tau_y(x)\triangleright y))\\
%     &=\tau^{-1}_{\sigma_x(y)}\tau^{-1}_{\tau_y(x)}(\tau_y(x)\triangleright y))\\
%     &=\tau^{-1}_{x}\tau^{-1}_{y}(\tau_y(x)\triangleright y))\\
%     &=\tau^{-1}_{x}(x\triangleright T(y)).\qedhere 
% \end{align*}
% \end{proof}

% \begin{proposition}
% \label{pro:T_general}
% Let $(X,r)$ be a solution. 
% The map $T\colon X\to X$, $x\mapsto\sigma_{\tau_x^{-1}(x)}(x)$, is invertible with
% inverse $U\colon X\to X$, $x\mapsto\sigma^{-1}_x(x)$. 
% \end{proposition}

% \begin{proof}
% Let $(X,\triangleright)$ be the derived rack of $(X,r)$. Then 
% $T(x)=\tau_x^{-1}(x\triangleright x)$. Since 
% $r(\tau_z^{-1}(z),z)=(\sigma_{\tau^{-1}_z(z)}(z),z)$, 
% \begin{equation}
%     \label{eq:Ttrick}
%     \sigma_{\tau^{-1}_z(z)}\circ\sigma_z=\sigma_{\sigma_{\tau^{-1}_z(z)}(z)}\circ\sigma_z
% \end{equation}
% holds for all $z\in X$ by 
% Lemma~\ref{lem:YB}. On the one hand, 
% \begin{align*}
%     U(T(x)) 
%     &= U(\sigma_{\tau^{-1}_x(x)}(x))
%     =\sigma^{-1}_{\sigma_{\tau^{-1}_x(x)}(x)}\sigma_{\tau^{-1}_x(x)}(x)=x
% \end{align*}
% because $\sigma_{\tau^{-1}_x(x)}=\sigma_{\sigma_{\tau^{-1}_x(x)}(x)}$ by~\eqref{eq:Ttrick}. 

% Now let $x,y\in X$ be such that $U(x)=y$. Since $r^{-1}(\sigma_x(y),\tau_y(x))=(x,y)$, 
% it follows that $\widehat{\tau}_{\tau_y(x)}\sigma_x(y)=y$ and that 
% $\widehat{\tau}_{\tau_y(x)}=\widehat{\tau_y}$. Then
% \[
% \widehat{\tau}_y(x)=\widehat{\tau}_{\tau_y(x)}(x)=\widehat{\tau}_{\tau_y(x)}\sigma_x(y)=y
% \]
% and hence $\widehat{\tau}^{-1}_y(y)=x$. Now $y\triangleright y=\tau_y\widehat{\tau}^{-1}_y(y)=\tau_y(x)$ and therefore
% \[
% T(y)=\tau_y^{-1}(y\triangleright y)=x.\qedhere
% \]
% \end{proof}

As it happens in the involutive case, there is a nice combinatorial structure that describes  
a solution. 

\begin{definition}
\index{Skew cycle set}
\index{Skew cycle set!non-degenerate}
\label{defn:skewCS}
A \emph{skew cycle set} is a triple $(X,\triangleleft,\cdot)$, where $X$ is a non-empty set, 
$(X,\triangleleft)$ is a rack and
$X\times X\to X$, $(x,y)\mapsto x\cdot y$, is a binary operation on $X$ such that the maps 
$X\to X$, $y\mapsto x\cdot y$, are bijective rack homomorphisms, and 
\begin{equation}
\label{eq:skew_CS}
(x\cdot y)\cdot (x\cdot z)=(y\cdot (x\triangleleft y))\cdot (y\cdot z)
\end{equation}
for all $x,y,z\in X$. A skew cycle set $(X,\triangleleft,\cdot)$ is said to be 
non-degenerate if the map $X\times X$, $x\mapsto x\cdot x$, is bijective.
\end{definition}

\framebox{FIXME}

\begin{definition}
\index{Homomorphism!of skew cycle sets}
Let $X$ and $Z$ be skew cycle sets. 
A \emph{homomorphism} between the cycle sets $X$ and $Z$ is a 
map $f\colon X\to Z$ such that $f(x\cdot y)=f(x)\cdot f(y)$ for all $x,y\in X$. An \emph{isomorphism} of cycle sets
is a bijective homomorphism of cycle sets. 
\end{definition}

Cycle sets and cycle set homomorphisms form a category. 
It is possible to prove that the category of 
solutions is equivalent to the category of cycle sets, 
see Exercise~\ref{prob:cycle_sets}. 


Theorem~\ref{thm:CS} can be generalized to arbitrary solutions.

\begin{theorem}
\label{thm:skewCS}
There exists a bijective correspondence between solutions 
and non-degenerate skew cycle sets. 
\end{theorem}

\begin{proof}
Let $(X,r)$ be a solution and $(X,\triangleleft)$ its derived rack. We will prove that 
the operation $x\cdot y=\sigma_x^{-1}(y)$ turns $(X,\triangleleft)$ into a skew cycle set.
By Proposition~\ref{pro:derived}, 
the 
maps $X\to X$, $y\mapsto x\cdot y$, are bijective rack homomorphisms. 

On the one hand, since $r(x,\sigma_x^{-1}(y))=(y,\tau_{\sigma_x^{-1}(y)}(x))$, 
\begin{align*}
(x\cdot y)\cdot (x\cdot z)
&=\sigma_x^{-1}(y)\cdot\sigma_x^{-1}(z)
=\sigma_{\sigma_x^{-1}(y)}^{-1}\sigma_x^{-1}(z)\\
&=\left(\sigma_x\circ\sigma_{\sigma_x^{-1}(y)}\right)^{-1}(z)
=\left(\sigma_y\circ\sigma_{\tau_{\sigma_x^{-1}(y)}(x)}\right)^{-1}(z).
\end{align*}
On the other hand, 
\begin{align*}
(y\cdot (x\triangleleft y))\cdot (y\cdot z)
&=\sigma_y^{-1}(\sigma_y\tau_{\sigma_x^{-1}(y)}(x))\cdot\sigma_y^{-1}(z)\\
&=\sigma^{-1}_{\tau_{\sigma_x^{-1}(y)}(x)}\sigma_y^{-1}(z)
=\left(\sigma_y\circ\sigma_{\tau_{\sigma^{-1}_x(y)}(x)}\right)^{-1}(z).
\end{align*}

Now we prove the converse statement. 
For $x,y\in X$ let 
\[
\sigma_x(y)=x*y,
\quad
\tau_y(x)=\sigma_{\sigma_x(y)}^{-1}(x\triangleleft\sigma_x(y)), 
\]
where $x*y=z$ if and only if $x\cdot z=y$. 
Since $X$ is a skew cycle set, each $\sigma_x$ is bijective. Let us prove that the $\tau_x$ are bijective. 
Equality~\eqref{eq:skew_CS} with $y=\sigma_x(z)$ implies that
\[
\sigma_z^{-1}\sigma_x^{-1}=\sigma^{-1}_{\sigma_x^{-1}(y)}\sigma_x^{-1}
=\sigma^{-1}_{\sigma_y^{-1}(x\triangleleft y)}\sigma_y^{-1}
=\sigma^{-1}_{\sigma^{-1}_{\sigma_x(z)}(x\triangleleft\sigma_x(z))}\sigma^{-1}_{\sigma_x(z)}
=\sigma^{-1}_{\tau_z(x)}\sigma^{-1}_{\sigma_x(z)}
\]
for all $x,z\in X$. 
Since each $\sigma_x$ is a rack homomorphism, 
\[
\tau_y(x)=\sigma^{-1}_{\sigma_x(y)}(x\triangleleft\sigma_x(y))
=\sigma^{-1}_{\sigma_x(y)}\sigma_x(\sigma^{-1}_x(x)\triangleleft y)
=\sigma_{\tau_y(x)}\sigma_y^{-1}(\sigma_x^{-1}(x)\triangleleft y).
\]
Therefore $T\circ\tau_y=\sigma_y^{-1}\circ\rho_y\circ T$, where $T\colon X\to X$, $T(x)=x\cdot x$ 
and $\rho_y\colon X\to X$, $\rho_y(x)=x\triangleleft y$ are bijective maps. In particular, 
$\tau_y$ is bijective for all $y\in X$. 

Now we prove that...
\framebox{solution?}

\framebox{invertible?}
\end{proof}

Theorem~\ref{thm:skewCS} can be used to construct small solutions, see Table~\ref{tab:non_involutive}.

\begin{table}[H]
\centering
\caption{Enumeration of non-involutive solutions.}
\begin{tabular}{|c|ccccccc|}
\hline
$n$ & 2 & 3 & 4 & 5 & 6 & 7 & 8\tabularnewline
\hline
$s(n)$ & 2 & 21 & 253 & 3519 & 100071 & 4602720 & 422449480\tabularnewline
\hline
\end{tabular}
\label{tab:non_involutive}
\end{table}

\section*{Exercises}

% \begin{prob}
%     \label{prob:Venkov}
%     Let $X$ be a set and $X\times X\to X$, $(x,y)\to x\triangleright y$. Prove that 
%     the pair $(X,s)$, where
%     $s(x,y)=(x\triangleright y,x)$, is a solution if and only if $(X,\triangleright)$ is a rack. 
%     Prove that
% \end{prob}
\begin{prob}
    \label{prob:xx}
    Prove that $x\triangleright x=x\blacktriangleright x$ for all $x\in X$. 
\end{prob}

\begin{prob}
    \label{prob:tau_hat}
    Prove that $\widehat{\tau}_x(y\triangleright z)=\widehat{\tau}_x(y)\triangleright \widehat{\tau}_x(z)$ for all $x,y,z\in X$. 
\end{prob}

\begin{prob}
    \label{prob:variationT}
    Let $(X,r)$ be a solution and let $(X,\triangleright)$ be its derived rack. 
    Prove that 
    \[
    T\sigma_x(y)=\tau_x^{-1}(x\triangleright T(y))
    \]
    for all $x\in X$, where $T\colon X\to X$, $T(y)=\tau_y^{-1}(y)$. 
\end{prob}

\begin{prob}
\label{prob:guitar}
Let $(X,r)$ be a solution and $(X,\triangleright)$ its derived rack. Let $T_2(x,y)=(\tau_y(x),y)$ and
$T_{n+1}=Q_n\circ (T_n\times\id)$ for $n\geq2$, where 
\[
Q_n(x_1,\dots,x_{n+1})=(\tau_{x_{n+1}}(x_1),\dots,\tau_{x_{n+1}}(x_n),x_{n+1}).
\]
Prove that $T_n\circ r_{i,i+1}=s_{i,i+1}\circ T_n$ for all $n\geq2$ and $i\in\{1,\dots,n-1\}$. 
\end{prob}

\section*{Open problems}

\begin{problem}
\label{problem:racks14}
Enumerate isomorphism classes of racks of size 14. 
\end{problem}

\begin{problem}
Enumerate non-involutive solutions of size $\geq9$. 
\end{problem}


\section*{Notes}

% Definition~\ref{defn:rack} is that of a \emph{left rack}. 
% A \emph{right rack} is defined as a pair $(X,\triangleleft)$, where $X$ is a non-empty set, 
% $X\times X\to X$, $(x,y)\mapsto x\triangleleft y$, is 
% a binary operation on $X$ such that the maps $x\mapsto x\triangleleft y$, are bijective and 
% \[
% (x\triangleleft y)\triangleleft z=(x\triangleleft z)\triangleleft (y\triangleleft z)
% \]
% for all $x,y,z\in X$. 
% As we did in Proposition~\ref{pro:derived}, one proves that $x\triangleleft y=...$ turns $X$ into a 
% right rack. This leads to the right derived solution of $(X,r)$. 
%According to Drinfeld, Exercise~\label{prob:Venkov} 
A particular family of racks turns out to be useful in combinatorial know theory. A quandle
is a rack $(X,\triangleleft)$ such that $x\triangleleft x=x$ for all $x\in X$. 

In~\cite{MR1183474}, Drinfeld attributes Proposition~\ref{pro:Venkov} to Venkov. 

There are several papers on the enumeration of isomorphic classes of finite racks~\cite{MR3665565,MR3118951,MR3904151}. 
Estimations on the number of finite
racks of size $n$ appear in~\cite{MR3118951}. 

The numbers of Table~\ref{tab:non_involutive} were computed using 
Theorem~\ref{thm:skewCS} essentially with the same technique used to construct involutive solutions~\cite{AMV}. 
The construction of non-involutive solutions of size 9 seems to be feasible with these methods. 
However, it should be noted that a huge number of solutions is expected. 

Exercises~\ref{prob:xx} and~\ref{prob:tau_hat} appear in~\cite{MR3974961}. 

The map $J$ of Exercise~\ref{prob:guitar} is known as the \emph{guitar map}. 
It was first considered by Etingof, Schedler and
Soloviev in~\cite{MR1722951} for involutive solutions. The construction was extended to non-involutive solutions
by Soloviev in~\cite{MR1809284} and Lu, Yan and Zhu in~\cite{MR1769723}. In~\cite{MR3374524} Dehornoy
used the inverse of the guitar map to develop his right-cyclic calculus and to
obtain short proofs for results on the structure group of involutive solutions. 
In~\cite{MR1994219} Andruskiewitsch and Gra√±a use the guitar map to study certain isomorphisms of Nichols algebras. 
A particular case of the guitar map also appears in the work of Przytycki~\cite{MR2906433}. 

The derived rack of a solution was first defined in the work of Soloviev~\cite{MR1809284}. Most of the properties
of the derived racks mentioned in this chapter were proved in~\cite{MR3974961}.

Problem~\ref{problem:racks14} appears in~\cite{MR3957904}. 

