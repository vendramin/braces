\chapter{Right nilpotent braces}

In this chapter we study right nilpotency of braces. 
We will see later that this algebraic notion translates into an important combinatorial 
property of solutions. 

\begin{definition}
\index{Brace!right series}
Let $A$ be a brace. 
One defines
$A^{(1)}=A$ and for $n\geq1$
\begin{align*}
    & A^{(n+1)}=A^{(n)}*A=\langle x*a: x\in A^{(n)},\,a\in A\rangle_+,
\end{align*}
where $\langle X\rangle_+$ denotes the subgroup of the additive group of $A$
generated by the subset $X$.  The sequence 
\[
A^{(1)}\supseteq A^{(2)}\supseteq
A^{(3)}\supseteq\cdots\supseteq A^{(n)}\supseteq\cdots
\]
is the \emph{right series} of $A$.
\end{definition}

\begin{proposition}
    \label{pro:right_series}
    Let $A$ be a brace. Each $A^{(n)}$ is an ideal of $A$.
\end{proposition}

\begin{proof}
    We want to prove that for each $n\in\N$, $A^{(n)}$ is a normal subgroup of
    $(A,+)$, that $\lambda_a(A^{(n)})\subseteq A^{(n)}$ for all $a\in A$ and
    that $A^{(n)}$ is a normal subgroup of $(A,\circ)$. We proceed by induction on $n$.
    The case $n=1$ is trivial. We assume that the claim is true for some $n\geq1$.  We first prove that
    $A^{(n+1)}$ is a normal subgroup of $(A,+)$. Let $a,b\in A$ and $x\in
    A^{(n)}$. Then $a+x*b-a\in A^{(n+1)}$ since
    \begin{align*}
        a+x*b-a&=a+\lambda_x(b)-b-a\\
        &=a+\lambda_x(b)-(a+b)
        =a+\lambda_x(-a+a+b)-(a+b)\\
        &=a+\lambda_x(-a)+\lambda_x(a+b)-(a+b)
        =-x*a+x*(a+b).
    \end{align*}
    Now we prove that $A^{(n+1)}$ is an ideal.
    Let $a,b\in A$ and $x\in A^{(n)}$. Then
\begin{equation}
    \label{eq:another_trick}
    \begin{aligned}
        \lambda_a(x*b)&=\lambda_a(\lambda_x(b)-b)
        =\lambda_a\lambda_x(b)-\lambda_a(b)\\
        &=\lambda_{a\circ x\circ a'}(\lambda_a(b))-\lambda_a(b)
        =(a\circ x\circ a')*\lambda_a(b)\in A^{(n+1)}
    \end{aligned}
\end{equation}
since $a\circ x\circ a'\in A^{(n)}$ by the inductive hypothesis.
From this it immediately follows that
$\lambda_a(A^{(n+1)})\subseteq A^{(n+1)}$.  Now let $y\in
A^{(n+1)}$. By using the formula~\eqref{eq:trick:I*A} of Proposition~\ref{pro:I*A} one obtains that
$a\circ y\circ a' =a+\lambda_a(y+y*a')-a\in A^{(n+1)}$. Thus
the result follows by induction.
\end{proof}

The second term of the right series is particularly important.

\begin{proposition}
 Let $A$ be a brace. Then $A^{(2)}$ is the smallest ideal of $A$
 such that $A/A^{(2)}$ is a trivial brace.
\end{proposition}

\begin{proof}
    Proposition~\ref{pro:right_series} shows that $A^{(2)}$ is an ideal of $A$. 
    Let $I$ be an ideal of $A$ and $\pi\colon A\to A/I$ be the canonical map. Then
    $A/I$ is trivial as a brace if and only if $\lambda_a(b)-b\in I$ for all
    $a,b\in A$. Since this condition is equivalent to $A^{(2)}\subseteq I$, the claim
    follows.
\end{proof}

\begin{definition}
\index{Brace!right nilpotent}
    A brace $A$ is said to be \emph{right nilpotent}
    if $A^{(m)}=\{0\}$ for some $m\geq1$.
\end{definition}

Let us review some basic properties of right nilpotent braces. 

\begin{lemma}
    \label{lem:right_nilpotent:quotient}
    Let $A$ and $B$ be braces. 
    \begin{enumerate}
        \item If $f\colon A\to B$ is a surjective homomorphism of braces and 
        $A$ is right nilpotent, then $B$ is right nilpotent.
        \item $B$ is a sub brace of $A$ and $A$ is right nilpotent, then 
        $B$ is right nilpotent.
    \end{enumerate}
\end{lemma}

\begin{proof}
    To prove the first claim we proceed by induction on $k$. 
    The case $k=1$ is trivial. Let us assume that the result 
    is valid for some $k\geq1$. Since
    $f(A^{(k)})=B^{(k)}$,
    \[
    f(A^{(k+1)})=f(A^{(k)}*A)=f(A^{(k)})*f(A)=B^{(k)}*B=B^{(k+1)}.
    \]
    The second claim also follows by induction, as $B^{(k)}\subseteq A^{(k)}$ for all $k$. 
\end{proof}

\begin{theorem}
    \label{thm:IcapSoc}
    Let $A$ be a right nilpotent brace of nilpotent type
    and $I$ be a non-zero ideal of $A$. Then $I\cap\Soc(A)\ne\{0\}$. 
    In particular,  $\Soc(A)\ne\{0\}$.
\end{theorem}

\begin{proof}
    Since $(A,+)$ is nilpotent and each $I\cap A^{(k)}$ is a normal subgroup of $(A,+)$, it follows
    from~\cite[5.2.1]{MR1357169} that $I\cap A^{(k)}\cap Z(A,+)\ne\{0\}$ whenever
    $I\cap A^{(k)}\ne\{0\}$.
    Let
    $m=\max\{k\in\N:I\cap A^{(k)}\cap Z(A,+)\ne \{0\}\}$.
    Since
    \[
        (I\cap A^{(m)}\cap Z(A,+))*A\subseteq I\cap (A^{(m)}*A)=I\cap A^{(m+1)}=\{0\},
    \]
    it follows that $I\cap A^{(m)}\cap Z(A,+)\subseteq I\cap \Soc(A)$. 
    For the second claim just take $I=A$ in the first claim. 
\end{proof}

The relation between the sequence of the $A^{[n]}$ and the left and
right series is given in the following theorem.

\begin{theorem}
    \label{thm:equivalence}
    Let $A$ be a brace. The following statements are equivalent:
    \begin{enumerate}
        \item $A^{[\alpha]}=\{0\}$ for some $\alpha\in\N$.
        \item $A^{(\beta)}=\{0\}$ and $A^\gamma=\{0\}$ for some $\beta,\gamma\in\N$.
    \end{enumerate}
\end{theorem}

\begin{proof}
    To prove that $(1)\implies(2)$ one proves that $A^{n}\subseteq
    A^{[n]}$ and $A^{(n)}\subseteq A^{[n]}$
    for all positive integer $n$.
    Let us prove that
    $(2)\implies(1)$. We proceed by induction on $\beta$.  If
    $\beta\in\{1,2\}$, then $0=A^{(2)}=A^2=A^{[2]}$ and the result is true. Fix
    $\beta\in\N$ and suppose that the result holds for this $\beta$, so for
    every $\gamma$ there exists $\alpha=\alpha(\gamma)$ depending on $\gamma$
    such that $A^{[\alpha]}=0$.  We need to show that $A^{(\beta+1)}=0$ and
    $A^{\gamma}=0$ imply that $A^{[n]}$ for some $n$. Let $n>\alpha(\gamma)$.
    Every element of $A^{[n]}$ is a sum of elements from $A^{[i]}*A^{[j]}$,
    where $i+j=n$ and $1\leq i\leq n-1$. Note that if $\alpha(\gamma)\leq i\leq
    n-1$, $a_i\in A^{[i]}$ and $a_{n-i}\in A^{[n-i]}$, then by the inductive
    hypothesis applied to the quotient $A/A^{(\beta)}$, $a_i\in A^{(\beta)}$ and thus $a_i*a_{n-i}\in A^{(\beta
    +1)}=0$. Hence we may assume that the elements of $A^{[n]}$ are sums of
    elements from $A^{[i]}*A^{[j]}$ for $1\leq i<\alpha(\gamma)$ and $j\geq
    n-\alpha(\gamma)$ such that $i+j=n$. Then
    \[
    A^{[n]}\subseteq A*A^{[n-\alpha(\gamma)]}\subseteq A^2.
    \]
    Applying the same argument for $n'=n-\alpha(\gamma)$ we obtain that
    $A^{[n']}\subseteq A*A^{[n'-\alpha(\gamma)]}$ provided that
    $n'>\alpha(\gamma)$. Therefore
    \[
        A^{[n]}\subseteq A*(A*A^{[n-2\alpha(\gamma)]})\subseteq A^3
    \]
    provided that $n>2\alpha(\gamma)$. Continuing in this way we obtain that
    $A^{[n]}\subseteq A^{k}$
    provided that $n>(k-1)\alpha(\gamma)$.
    Then it follows that $A^{[(\gamma-1)\alpha(\gamma)+1]}\subseteq
    A^{\gamma}=\{0\}$.
\end{proof}


We now present some characterizations of right nilpotent braces. We first 
need some definitions.  

\begin{definition}
\label{defn:s-series}
\index{Brace!s-series}
    Let $A$ be a brace. A \emph{$s$-series} of $A$ is a sequence
    \[
        A=I_0\supseteq I_1\supseteq I_2\supseteq\cdots\supseteq I_n=\{0\}
    \]
    of ideals of $A$ such that $I_{j-1}/I_j\subseteq \Soc(A/I_j)$ for each
    $j\in\{1,\dots,n\}$.
\end{definition}

% \begin{remark}
% Let $A$ be a left brace.  Rump in \cite{MR2278047} defined the socle
% series $\Soc_n(A)$ of $A$ as follows: $\Soc_0(A)=0$ and, for $n\geq
% 1$,
% \[
% \Soc_n(A)=\{ x\in A\colon x*y\in
% \Soc_{n-1}(A) \}.
% \]
% There are examples of nonzero left braces $A$ such that
% $\Soc_n(A)=0$ for all positive integers $n$.
% %Hence Rump's socle
% %series is not our $s$-series.% in our sense.
% \end{remark}



\begin{definition}
\label{defn:socle_series}
\index{Brace!socle series}
Let $A$ be a brace. We define
$\Soc_0(A)=\{0\}$ and, for $n\geq 1$, $\Soc_n(A)$ is the ideal of $A$
containing $\Soc_{n-1}(A)$ such that
\[
    Soc_n(A)/\Soc_{n-1}(A)=\Soc(A/\Soc_{n-1}(A)).
\]
\end{definition}

Rump's socle series of~\cite{MR2278047} does not coincide with the s-series of Definition~\ref{defn:s-series}. 
However, our Definition~\ref{defn:socle_series} does coincide with that 
of Rump~\cite{MR2278047} for braces of abelian type. 

\begin{lemma}
    \label{lem:socle_series}
    Let $A$ be a brace and let $A=I_0\supseteq I_1\supseteq
    I_2\supseteq\cdots\supseteq I_n=\{0\}$ be a $s$-series for $A$. Then
    $A^{(i+1)}\subseteq I_i$ for all $i$.
\end{lemma}

\begin{proof}
    We proceed by induction on $i$. The case $i=0$ is trivial, so let us assume
    that the result holds for some $i\geq 0$. Let $\pi\colon A\to A/I_{i+1}$ be the canonical map.
    Since $\pi(I_{i})\subseteq\Soc(A/I_{i+1})$,
    $\pi(I_{i}*A)=\pi(I_{i})*\pi(A)=\{0\}$ and hence $I_{i}*A\subseteq I_{i+1}$.
    The inductive hypothesis then implies that
    $A^{(i+2)}=A^{(i+1)}*A\subseteq I_{i}*A\subseteq I_{i+1}$. Thus
    the result follows.
\end{proof}

\begin{lemma}
\label{lem:socn}
Let $A$ be a brace. Then $A$ admits a
$s$-series if and only if there exists a positive integer $n$ such
that $A=\Soc_n(A)$.
\end{lemma}

\begin{proof}
    Suppose that there exists a positive integer $n$ such
that $A=\Soc_n(A)$. Then 
\[
A=\Soc_n(A)\supseteq
\Soc_{n-1}(A)\supseteq\cdots\supseteq \Soc_0(A)=\{0\},
\] is a
$s$-series. Conversely, suppose that $A$ admits a $s$-series.
Let 
\[
A=I_0\supseteq I_1\supseteq I_2\supseteq\cdots\supseteq I_n=\{0\}
\]
be a $s$-series of $A$. We shall prove that $I_{n-j}\subseteq
\Soc_{j}(A)$ by induction on $j$. For $j=0$, $I_n=\{0\}=\Soc_0(A)$.
Suppose that $j>0$ and $I_{n-j+1}\subseteq \Soc_{j-1}(A)$. Since
$I_{n-j}/I_{n-j+1}\subseteq \Soc(A/I_{n-j+1})$, $I_{n-j}*A\subseteq
I_{n-j+1}\subseteq \Soc_{j-1}(A)$, by the induction hypothesis.
Furthermore, for all $x\in A$ and all $y\in I_{n-j}$, 
\[
x+y-x-y\in
I_{n-j+1}\subseteq \Soc_{j-1}(A).
\]
Therefore
$I_{n-j}\subseteq\Soc_j(A)$. Hence $A=I_0=\Soc_n(A)$ and the result
follows.
\end{proof}


\begin{proposition}
    \label{pro:right_nilpotent}
    A brace of nilpotent type is right nilpotent if and only if it admits a $s$-series.
\end{proposition}

\begin{proof}
    Let $A$ be a brace of nilpotent type. If $A$ admits a $s$-series, then $A$ is right nilpotent by
    Lemma~\ref{lem:socle_series}.
    Conversely, suppose that $A$ is right nilpotent.
    There exists a positive integer such that $A^{(m)}=\{0\}$.
    We shall prove that $A$ admits a $s$-series by induction on $m$. For $m=1$, $A=A^{(1)}=\{0\}$ is a $s$-series. Suppose
    that $m>1$ and that the result is true for $m-1$. Consider
    $\bar A=A/A^{(m-1)}$. Since $\bar A^{(m-1)}=\{0\}$, by the induction
    hypothesis $\bar A$ admits a $s$-series. Thus there is a
    sequence
    \[
        A=I_0\supseteq I_1\supseteq I_2\supseteq\cdots\supseteq I_n=A^{(m-1)}
    \]
    of ideals of $A$ such that $I_{j-1}/I_j\subseteq \Soc(A/I_j)$ for each
    $j\in\{1,\dots,n\}$. Since $A^{(m)}=\{0\}$, we have that $A^{(m-1)}\subseteq
    \ker(\lambda)$. Since $A$ is of nilpotent type, there exists a
    positive integer $s$ such that $\gamma^+_s(A)=\{0\}$, where
    $\gamma^+_i(A)$ denotes the lower central series of the additive
    group of $A$, that is $\gamma^+_1(A)=A$ and $\gamma^+_{i+1}(A)=[A,\gamma^+_i(A)]_+$, for all positive integers $i$.
    Let $I_{n+j-1}=A^{(m-1)}\cap \gamma^+_{j}(A)$ for $j=1,\dots ,s$.
    Note that $I_{n+j-1}$ is a normal subgroup of the additive group
    of $A$ invariant by $\lambda_x$, for all $x\in A$, and
    $I_{n+j-1}* A=\{0\}$, for all $j=1,\dots , s$, because $A^{(m-1)}\subseteq
    \ker(\lambda)$. By Proposition~\ref{pro:I*A}, $I_{n+j-1}$ is an ideal
    of $A$, for all $j=1,\dots , s$.
    Note that $I_{n+j-1}/I_{n+j}\subseteq Z(A/I_{n+j},+)$, for all $j=1,\dots ,s-1$. Therefore, since
    $I_{n+j-1}\subseteq\ker(\lambda)$, we have that $I_{n+j-1}/I_{n+j}\subseteq \Soc(A/I_{n+j})$, for all $j=1,\dots ,s-1$.
    Hence
    \[
        A=I_0\supseteq I_1\supseteq I_2\supseteq\cdots\supseteq
        I_n=A^{(m-1)}\supseteq I_{n+1}\supseteq\cdots\supseteq
        I_{n+s-1}=\{0\}
    \]
    is a $s$-series of $A$, and the result follows by induction.
\end{proof}

\begin{proposition}
    \label{pro:A/Soc}
    Let $A$ be a brace such that $A/\Soc(A)$ is right nilpotent. Then $A$
    is right nilpotent.
\end{proposition}

\begin{proof}
    Note that $(A/\Soc(A))^{(k)}=\{0\}$ if and only if $A^{(k)}\subseteq\Soc(A)$ by
    the definition of the quotient brace. Then $A^{(k+1)}=A^{(k)}*A\subseteq\Soc
    (A)*A=\{0\}$ as required.
\end{proof}

% \begin{proposition}
%     Let $I$ be an ideal of a skew left brace $A$ such that $I\cap A^2=0$. Then $I$
%     is a trivial skew left brace.
% \end{proposition}

% \begin{proof}
%     Since $I*A\subseteq I\cap A^2=0$, $I\subseteq\ker\lambda$. From this the
%     claim follows.
% \end{proof}

\begin{definition}
\index{Brace!of finite multipermutation level}
A brace $A$ has \emph{finite multipermutation level} if
the sequence $S_n$ defined as $S_1=A$ and $S_{n+1}=S_n/\Soc(S_n)$
for $n\geq1$, reaches zero.
\end{definition}

\begin{proposition}
\label{newmulti}
Let $A$ be a brace. Then $A$ has finite
multipermutation level if and only if $A$ admits a $s$-series.
\end{proposition}

\begin{proof}
Let $S_1=A$ and $S_{n+1}=S_n/\Soc(S_n)$ for
$n\geq1$. By induction on $n$ we prove that $S_{n+1}\simeq A/\Soc_n(A)$. 
For $n=0$, it is clear since $\Soc_0(A)=\{0\}$.
Suppose that $n>0$ and the result is true for $n-1$. Hence, by the
induction hypothesis,
\begin{align*}
S_n&=S_{n-1}/\Soc(S_{n-1})\\
&\simeq (A/\Soc_{n-1}(A))/\Soc(A/\Soc_{n-1}(A))\\
&=(A/\Soc_{n-1}(A))/(\Soc_n(A)/\Soc_{n-1}(A))\simeq A/\Soc_n(A).
\end{align*} 
Therefore $S_n=0$ if and only if
$A=\Soc_n(A)$. Now Lemma~\ref{lem:socn} applies.
\end{proof}

\begin{theorem}
\label{thm:mpl&right_nilpotent}
Let $A$ be a brace. Then $A$ has finite multipermutation level, if and only
if  $A$ is right nilpotent and $(A,+)$ is nilpotent.
\end{theorem}

\begin{proof}
Suppose that $A$ has finite multipermutation level.
We proceed by induction on the multipermutation level $n$. The case
$n=1$ is trivial.  Let $A$ be a skew left brace of
    finite multipermutation level $n+1$. Since $A/\Soc(A)$ has multipermutation
    level $n$, the inductive hypothesis implies that $(A/\Soc(A))^{(m)}=\{0\}$ for
    some $m$ and $(A/\Soc(A),+)$ is nilpotent. This implies that
    $A^{(m)}\subseteq\Soc(A)$ and hence $A^{(m+1)}=\{0\}$, furthermore, since
    $\Soc(A)$ is central in $(A,+)$, we have that $(A,+)$ is nilpotent.
Conversely, suppose that $A$ is right nilpotent and $(A,+)$ is
nilpotent.  By Proposition~\ref{pro:right_nilpotent}, $A$ admits a
$s$-series. Thus the result follows from Proposition~\ref{newmulti}.
\end{proof}

The following example shows that the assumption on the nilpotency of
the additive group of the brace is needed in 
Theorem~\ref{thm:mpl&right_nilpotent}.

\begin{example}
\label{ex:trivial}
Let $A$ be a non-zero brace such that $a\circ b=a+b$ for
all $a,b\in A$. Then $A^{(2)}=\{0\}$, thus $A$ is right nilpotent. 
If $Z(A,+)=\{0\}$, then $\Soc(A)=\{0\}$ and $A$ does not have finite
multipermutation level. For example, we can take $(A,+)=(A,\circ)$
any non-abelian simple group.
\end{example}

Let $A$ be a brace. For subsets $X$ and $Y$ of $A$ we define 
inductively $R_0(X,Y)=X$ and $R_{n+1}(X,Y)$ as the additive subgroup generated by
$R_n(X,Y)*Y$ and $[R_n(X,Y),Y]_+$ for $n\geq0$.

\begin{lemma}
    \label{lem:R:inclusion}
    Let $I$ be an ideal of a brace $A$. Then
    $R_{n+1}(I,A)\subseteq R_n(I,A)$ for all $n\geq0$.
\end{lemma}

\begin{proof}
    We proceed by induction on $n$. The case $n=0$ is trivial as $I$ is an ideal of $A$. 
    Let us assume that the claim holds for some $n\geq0$. Since by the inductive hypothesis
    $R_n(I,A)*A\subseteq R_{n-1}(I,A)*A\subseteq R_{n}(I,A)$ and 
    \[
    [R_n(I,A),A]_+\subseteq [R_{n-1}(I,A),A]_+ \subseteq R_n(I,A),
    \]
    it follows that $R_{n+1}(I,A)\subseteq R_n(I,A)$.
\end{proof}

\begin{proposition}
    \label{lem:R:ideal}
    Let $I$ be an ideal of a brace $A$. 
    Then each $R_{n}(I,A)$ is an ideal of $A$. 
\end{proposition}

\begin{proof}
    We proceed by induction on $n$. The case where $n=0$ follows from the fact that $I$ is an ideal of $A$. 
    So assume that the result holds for some $n\geq0$.
    We first prove that $R_{n+1}(I,A)$ is a normal subgroup of $(A,+)$. Let $a,b\in A$ and 
    $x\in R_n(I,A)$. Then
    \[
    a+x*b-a=-x*a+x*(a+b)\in R_{n+1}(I,A),
    \]
    by definition. 
    Since, moreover, 
    \begin{multline*}
    a+(x+b-x-b)-a\\
    =(a+x-a)+(a+b-a)-(a+x-a)-(a+b-a) \in R_{n+1}(I,A)
    \end{multline*}
    by the inductive hypothesis, it follows that $R_{n+1}(I,A)$ is a normal subgroup of $(A,+)$.
  
    We now prove that 
    \begin{equation}
        \label{eq:lambda}\lambda_a(R_{n+1}(I,A))\subseteq R_{n+1}(I,A)
    \end{equation} 
    for all $a\in A$. 
    Using 
    the inductive hypothesis and that 
    each $\lambda_a\in\Aut(A,+)$, 
    \begin{align*}
  %  &\lambda_a([R_n(I,A),A]_+)\subseteq[\lambda_a(R_n(I,A)),\lambda_a(A)]_+
  %  \subseteq [R_n(I,A),A]_+
  %  \subseteq R_{n+1}(I,A),
    &\lambda_a(x*b)%&=\lambda_a(\lambda_x(b)-b) = \lambda_{axa'}\lambda_a(b)-\lambda_a(b)\\
    =(a\circ x\circ a')*\lambda_a(b) \in R_{n+1}(I,B)
    \shortintertext{and}
    &\lambda_a([R_n(I,A),A]_+)\subseteq[\lambda_a(R_n(I,A)),\lambda_a(A)]_+\\
    &\phantom{\lambda_a([R_n(I,A),A]_+)}\subseteq [R_n(I,A),A]_+
    \subseteq R_{n+1}(I,A),
    % &\deleted{\lambda_a(R_n(I,A)*A)\subseteq \lambda_a(R_n(I,A))*\lambda_a(A)
    % \subseteq R_n(I,A)*A\subseteq R_{n+1}(I,A),}
    \end{align*}
    equality \eqref{eq:lambda} follows. 
    
    Since $R_{n+1}(I,A)\subseteq R_n(I,A)$ by Lemma \ref{lem:R:inclusion},
    \[
    R_{n+1}(I,A)*A\subseteq R_n(I,A)*A\subseteq R_{n+1}(I,A).
    \] 
    Hence the claim follows from Proposition~\ref{pro:I*A}.
    %~\cite[Lemma 1.9]{csv}.
    %Since both $R_n(I,A)*A\subseteq R_n(I,A)$ and 
    %$[R_n(I,A),A]_+\subseteq R_n(I,A)$
    %hold by the inductive hypothesis, 
    %$R_{n+1}(I,A)*A\subseteq R_n(I,A)*A\subseteq R_{n+1}(I,A)$ by using %Lemma~\ref{lem:R:inclusion}.
    %Hence the claim follows from~\cite[Lemma 1.9]{csv}.
\end{proof}


\begin{lemma}
\label{lem:mbbr}
	Let $A$ be a brace, $X$ be a subset of $A$ and $n,m\in\N$.
	Then $R_m(X,A)\subseteq \Soc_n(A)$ 
	if and only if $X\subseteq\Soc_{m+n}(A)$.
\end{lemma}

\begin{proof}
    We proceed by induction on $m$. The case where $m=0$ is trivial, so assume that the result is valid for some $m\geq0$. 
	Note that $R_{m+1}(X,A)\subseteq\Soc_{n}(A)$ is equivalent to  $R_m(X,A)*A\subseteq\Soc_{n}(A)$ and $[R_m(X,A),A]_+ \subseteq\Soc_{n}(A)$. 
	By Lemma~\ref{lem:soc_n}, this is equivalent to $R_m(X,A)\subseteq\Soc_{n+1}(A)$, 
	which is equivalent to $X\subseteq\Soc_{m+n+1}(A)$ by the inductive hypothesis.
\end{proof}

\begin{lemma}
	A skew left brace $A$ of nilpotent type is right nilpotent if and only if $R_n(A,A)=\{0\}$ for some $n\in\N$.
%	
%	\begin{proof}
%		If $A$ is right nilpotent, Lemma \ref{lem:soc_n_2} implies that $A=R_0(A,A)\subseteq \Soc_n(A)$ for some $n$ and hence 
%		$R_n(A,A)=0$ by Lemma \ref{lem:mbbr}. 
%		Conversely, if $R_n(A,A)=0$, we prove by induction that $A^{(n+1)}\subseteq R_n(A,A)$ and then $A^{(n+1)}=0$.
%	\end{proof}
\end{lemma}

\begin{proof}
    By Lemma \ref{lem:mbbr}, $R_n(A,A)=0$ if and only if $A=\Soc_{n}(A)$. By Lemma \ref{lem:soc_n_2}, 
    the latter is equivalent to $A$ being right nilpotent.
\end{proof}

Recall that a finite group $G$ is said to be \emph{$p$-nilpotent} if there exists 
a normal Hall $p'$-subgroup of $G$. One proves that this subgroup is characteristic in $G$. 
%Following~\cite{mbbr} we define right $p$-nilpotent skew left braces
%of nilpotent type:

\begin{definition}
    Let $p$ be a prime number. A finite brace $A$ of nilpotent type 
    is said to be \emph{right $p$-nilpotent} if there 
    exists $n\geq1$ such that $R_n(A_p,A)=\{0\}$, where $A_p$ is the Sylow $p$-subgroup of $(A,+)$.
\end{definition}

\begin{proposition}
\label{pro:soc_n}
    Let $A$ be a finite brace of nilpotent type and $p\in\pi(A)$. Then
    $A_p\subseteq\Soc_n(A)$ for some $n\geq1$ if and only if 
    $A$ is right $p$-nilpotent. 
\end{proposition}

\begin{proof}
    By Lemma~\ref{lem:mbbr}, %\textcolor{red}{or Lemma \ref{lem:soc_n_3}}, 
    $R_n(A_p,A)=\{0\}$ if and only if $A_p\subseteq\Soc_n(A)$. 
\end{proof}


\begin{proposition}
    A finite brace $A$ of nilpotent type is right nilpotent if and only if $A$ is right $p$-nilpotent for all $p\in\pi(A)$. 
\end{proposition}

\begin{proof}
    Assume first that $A$ is right nilpotent. 
    By Lemma~\ref{lem:soc_n_2}, there exists $n\in\N$ such that $A_p\subseteq A=\Soc_n(A)$ for all $p\in\pi(A)$. Hence the claim follows from
    Proposition~\ref{prop:soc_n}. 
    Assume now
    that $A$ is right $p$-nilpotent for all $p\in\pi(A)$. This means
    that for each $p\in\pi(A)$ there exists $n(p)\in\N$ such that
    $A_p\subseteq\Soc_{n(p)}(A)$. Let 
    $n=\max\{n(p):p\in\pi(A)\}$. Then $A_p\subseteq\Soc_n(A)$ for all $p\in\pi(A)$. Since $\Soc_n(A)$ is an ideal
    of $A$ and $A$ is of nilpotent type, $A=\oplus_{p\in\pi(A)}A_p\subseteq\Soc_n(A)$. Hence $A$ is right nilpotent by Lemma~\ref{lem:soc_n_2}.
\end{proof}

%\textcolor{red}{\begin{rem}
%	If $X\subseteq Y$, then $R_n(X,a)\subseteq(Y,A)$. It follows easily by induction and the first part of the previous proposition is straightforward.
%\end{rem}}


%The main result of this section is the following:

\begin{lemma}
\label{lem:A_p:ideal}
    Let $A$ be a finite skew left brace of nilpotent type. If $(A,\circ)$ has a normal
    Sylow $p$-subgroup for some $p\in\pi(A)$, then $A_p$ is an ideal of $A$.
\end{lemma}

\begin{proof}
   Since the group $(A,+)$ is nilpotent, there exists a unique normal Sylow $p$-subgroup $A_p$ of $(A,+)$. 
   By Lemma~\ref{lem:Sylow:left_ideal}, $A_p$ is a left ideal of $A$. Then $A_p$ is a Sylow
   $p$-subgroup of $(A,\circ)$, normal by hypothesis and hence $A_p$ is an ideal of $A$. 
\end{proof}

\begin{lemma}
    \label{lem:Soc(A_p)}
    Let $A$ be a finite skew left brace of nilpotent type.
    If $(A,\circ)$ has a normal Sylow $p$-subgroup for some $p\in\pi(A)$, 
    then $\Soc(A_p)=\Soc(A)\cap A_p$. In particular, $\Soc(A_p)$ is an ideal of $A$.
\end{lemma}

\begin{proof}
    By Lemma~\ref{lem:A_p:ideal}, $A_p$ is an ideal of $A$. 
    Clearly $\Soc(A_p)\supseteq\Soc(A)\cap A_p$, so 
    we only need to prove that $\Soc(A_p)\subseteq\Soc(A)\cap A_p$. 
    %If $a\in A_p\cap\Soc(A)$, then 
    %$a\in Z(A_p,+)$ and $a*b=0$ for all $b\in A$. In particular, $a\in Z(A,+)$ and 
    %$a*b=0$ for all $b\in A_p$. Conversely, 
    If $a\in\Soc(A_p)$, then $a\in Z(A_p,+)$ and
    $a*b=0$ for all $b\in A_p$. Let $c\in A$ and write $c=x+y$, where $x\in A_p$ and 
    $y\in A_{p'}$. Since 
    \[
    a*c=a*(x+y)=a*x+x+a*y-x=x+a*y-x\in A_p\cap A_{p'}=0
    \]
    and $a\in Z(A,+)$, the lemma is proved.
\end{proof}

\begin{theorem}
\label{thm:right_p}
    Let $A$ be a finite skew left brace of nilpotent type. If $(A,\circ)$ has an abelian normal
    Sylow $p$-subgroup for some $p\in\pi(A)$, then $A$ is right $p$-nilpotent.
\end{theorem}

% Our proof is very similar to that of~\cite{mbbr}. 
% We shall need the following lemmas:
%Now we prove Theorem~\ref{thm:right_p}.

\begin{proof}
    Let us assume that the result does not hold and let $A$ be a counterexample of minimal size. We may assume that $A$ is non-trivial, i.e. $\Soc(A)\ne A$.
    %By Lemma~\ref{lem:Soc(A_p)}, $\Soc(A_p)$ is an ideal of $A$. 
    %Let $A_{p'}=\oplus_{q\in\pi(A)\setminus\{p\}}A_q$. The facts that $A_{p'}$ is a left ideal of $A$ 
    %and $A_p$ is an ideal of $A$ imply that $A_p*A_{p'}\subseteq A_p\cap A_{p'}=\{0\}$.
    By Lemma~\ref{lem:A_p:ideal}, $A_p$ is an ideal of $A$.
    
    Since 
    $\lambda_a\in\Aut(A_p,+)$, $\lambda_a(Z(A_p,+))\subseteq Z(A_p,+)$ 
    and hence $Z(A_p,+)$ is a left ideal of $A_p$.
    
    By Lemma~\ref{lem:Soc(A_p)}, $\Soc(A_p)$ is an ideal of $A$. Furthermore, since $(A_p,\circ)$ is abelian, 
    \begin{align*}
    \Soc(A_p)&=\{a\in A_p:a*b=0\text{ for all $b\in A_p$}\}\cap Z(A_p,+)\\
    &=\{a\in A_p:a\circ b=a+b\text{ for all $b\in A_p$}\}\cap Z(A_p,+)\\
    &=\{a\in A_p:b\circ a=b+a\text{ for all $b\in A_p$}\}\cap Z(A_p,+)\\
    &=\Fix(A_p)\cap Z(A_p,+).
    \end{align*}
    Since $|A_p|=p^m$ for some $m\geq1$, the skew left brace $A_p$ is left nilpotent by Proposition~\ref{pro:pgroups}, and, moreover, $Z(A_p,+)$ is a non-zero 
    subgroup of $(A_p,+)$. Then $\Soc(A_p)=\Fix(A_p)\cap Z(A_p,+)\ne\{0\}$ by
    Proposition~\ref{pro:IcapFix}. 
    %~\cite[Proposition 2.26]{csv}. 
    In particular, 
    \[
    \{0\}\ne \Soc(A_p)\subseteq \Soc(A).
    \]
    Lemma \ref{lem:Soc(A_p)} implies that $I=\Soc(A_p)$ is a non-trivial ideal of $A$. Then $A/I$ is a brace of nilpotent type such that $0<|A/I|<|A|$. 
    The minimality of $|A|$ implies that $A/I$ is right $p$-nilpotent and 
    therefore $R_n(A_p/I,A/I)=\{0\}$ for some $n$. 
    That is $R_n(A_p,A)\subseteq I\subseteq \Soc(A)$. 
    By Lemma \ref{lem:mbbr}, $R_{n+1}(A_p,A)=\{0\}$. Then $A$ is right $p$-nilpotent, a contradiction.
\end{proof}

Recall that a
group $G$ has the \emph{Sylow tower property} if 
there exists a normal series
$1=G_0\subseteq G_1\subseteq\cdots\subseteq G_n=G$ 
such that each quotient $G_i/G_{i-1}$ is isomorphic to a Sylow subgroup of $G$. 
We also recall that \emph{$A$--groups} are finite groups whose Sylow subgroups are abelian. 

\begin{corollary}
\label{cor:STP+abelian}
	Let $A$ be a finite brace of nilpotent type. Assume that 
	$(A,\circ)$ has the Sylow tower property and that 
	all Sylow subgroups of $(A,\circ)$ are abelian. 
	Then $A$ is right nilpotent.
\end{corollary}

\begin{proof}
    Assume that the result is not true and let $A$ be a counterexample of minimal size. 
    Since $(A,\circ)$ has the Sylow tower property, there exists a normal Sylow $p$-subgroup $A_p$ of $(A,\circ)$. Then $A_p$ is a non-zero ideal of $A$
    and one proves that 
    \[
    \{0\}\ne\Soc(A_p)=\Soc(A)\cap A_p\subseteq\Soc(A).
    \]
    The 
    group $(A/\Soc(A),\circ)$ has abelian Sylow subgroups 
    and has the Sylow tower property. Since $A$ is a non-trivial
    skew left brace, $0<|A/\Soc(A)|<|A|$, and therefore $A/\Soc(A)$ 
    is right nilpotent by the minimality of $|A|$. 
    By Proposition~\ref{pro:A/Soc}, $A$ is right nilpotent, a contradiction.
    %~\cite[Proposition 2.17]{csv}, $A$ is right nilpotent, a contradiction.
\end{proof}

There are examples of right nilpotent left braces where the multiplicative 
group contains a non-abelian Sylow subgroup or does not have the Sylow tower property:

\begin{example}
    The operation $a\circ b=a+3^ab$ turns $\Z/8$ into a right nilpotent left brace with multiplicative group isomorphic to the quaternion group. This example appears in~\cite{MR3320237}.
\end{example}

\begin{example}
    Let $G=\Alt_4\times\Sym_3$. Each Sylow subgroups of $G$ is abelian, so it follows from~\cite[Theorem 2.1]{cjo} that there exists a left brace with multiplicative group isomorphic to $G$. The group $G$ does not have the Sylow tower property. The database of left braces of~\cite{MR3647970} shows that there are only four left braces with multiplicative group isomorphic to $G$, all with additive group isomorphic to $C_6\times C_6\times C_2$. However, only one of these four braces is not right nilpotent. 
\end{example}

As a corollary, we obtain a generalization of Theorem~\ref{thm:cyclic_sylows:brace}:

\begin{corollary}
    Let $A$ be a finite skew left brace of nilpotent type. 
    If all Sylow subgroups of the multiplicative
    group of $A$ are cyclic, then $A$ is right nilpotent.
\end{corollary}

\begin{proof}
    Since all Sylow subgroups of $(A,\circ)$ are cyclic, the group $(A,\circ)$ is supersolvable and hence
    it has the Sylow tower property. Then the claim follows from Corollary~\ref{cor:STP+abelian}.
\end{proof}

%The same technique can be used to prove a converse of Theorem~\ref{thm:right_p}. 
%\begin{thm}
%    Let $A$ be a finite skew left brace of nilpotent type. If $A$ is right nilpotent 
%    and all Sylow subgroups of $(A,\circ)$ are abelian, then $(A,\circ)$
%    satisfies the Sylow tower property.
%\end{thm}
%\begin{proof}
%    Let $A$ be a counterexample of minimal size. By Lemma~\ref{lem:A_p:ideal}, $A_p$ is an ideal of $A$ for 
%    some $p\in\pi(A)$. Since $A_p$ satisfies the hypothesis of the theorem, the minimality of $|A|$ implies that %$(A_p,\circ)$ has the Sylow tower property. From this the claim follows. 
%\end{proof}

\section*{Exercises}

\begin{prob}
     Let $A_1,\dots,A_k$ be right nilpotent braces. Prove that 
     $A_1\times\cdots\times A_k$ is right nilpotent.
\end{prob}

\begin{prob}
    Let $A$ be a right nilpotent brace of nilpotent type and $I$ be a
    minimal ideal of $A$. Prove that $I\subseteq\Soc(A)$.
\end{prob}

\begin{prob}
    Let $I$ be an ideal of a brace $A$ such that $I\cap A^2=\{0\}$. Prove that $I$
    is a trivial brace.
\end{prob}

\begin{prob}
% problema de agata sobre la existencia de right nilpotent, ver JAlgebra
\end{prob}

\section*{Open problems}

\section*{Notes}

The right series first appeared in the work of Rump~\cite{MR2278047}, 
where it was proved for braces of abelian type. 

Theorem~\ref{thm:right_p} was proved by Meng, Ballester--Bolinches and Romero in the case of braces of abelian type~\cite{MR3935814}. For general 
braces the proof appeared in~\cite{MR4062375}. 
